(1) Answer to why is closing wrong?

   Closing is fine. Using the socket after it is closed is wrong. Should exit function at this point.